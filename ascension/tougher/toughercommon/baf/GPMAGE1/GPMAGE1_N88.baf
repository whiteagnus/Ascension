IF
  ActionListEmpty()
  CheckStatLT(LastSeenBy(Myself),50,RESISTMAGIC)
  HaveSpell(WIZARD_POLYMORPH_OTHER)
  HPGT(LastSeenBy(Myself),40)
  RandomNum(3,1)
THEN
  RESPONSE #100
    Spell(LastSeenBy(Myself),WIZARD_POLYMORPH_OTHER)
END